<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <title>JobGuard AI ‚Ä¢ Home</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root[data-theme="dark"] {
      --bg:#0f172a; --surface:#1e293b; --card:#0b1323; --accent:#3b82f6;
      --text:#f1f5f9; --muted:#94a3b8; --border:#475569; --hover:#1d4ed8;
      --fake:#dc2626; --real:#16a34a; --shadow:rgba(0,0,0,.45); --gold:#f59e0b;
      --ok:#10b981; --warn:#f59e0b;
    }
    :root[data-theme="light"] {
      --bg:#f8fafc; --surface:#ffffff; --card:#eef2ff; --accent:#2563eb;
      --text:#0f172a; --muted:#475569; --border:#e5e7eb; --hover:#1d4ed8;
      --fake:#dc2626; --real:#16a34a; --shadow:rgba(0,0,0,.12); --gold:#b45309;
      --ok:#059669; --warn:#b45309;
    }
    * { box-sizing:border-box; }
    body { margin:0; font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:var(--bg); color:var(--text); }

    /* Header */
    header { position:sticky; top:0; z-index:50; background:var(--surface); border-bottom:1px solid var(--border); box-shadow:0 3px 14px var(--shadow); backdrop-filter: blur(6px); }
    .nav { max-width:1440px; margin:0 auto; padding:24px 36px; display:flex; align-items:center; justify-content:space-between; }
    .brand { font-weight:800; color:var(--accent); font-size:22px; display:flex; align-items:center; gap:12px; letter-spacing:.2px; }
    .brand .pulse { width:12px; height:12px; border-radius:50%; background:var(--accent); box-shadow:0 0 0 0 rgba(59,130,246,0.7); animation:pulse 2s infinite; }
    @keyframes pulse { 0%{box-shadow:0 0 0 0 rgba(59,130,246,0.7);} 70%{box-shadow:0 0 0 16px rgba(59,130,246,0);} 100%{box-shadow:0 0 0 0 rgba(59,130,246,0);} }
    .nav-actions { display:flex; gap:14px; }
    .btn { padding:14px 18px; border-radius:14px; border:1px solid var(--border); background:var(--surface); color:var(--text); text-decoration:none; font-weight:700; font-size:16px; transition:transform .12s ease, background .12s ease; }
    .btn:hover { background:var(--card); transform:translateY(-1px); }
    .btn.primary { background:var(--accent); color:#fff; border-color:var(--hover); }
    .btn.primary:hover { filter:brightness(1.05); }

    /* Hero */
    .hero { position:relative; overflow:hidden; }
    .hero-inner { max-width:1440px; margin:72px auto; padding:0 36px; display:grid; gap:48px; grid-template-columns: 1.35fr 1fr; align-items:center; }
    .hero h1 { font-size:60px; line-height:1.12; margin:0 0 18px; letter-spacing:.2px; }
    .hero p { color:var(--muted); font-size:21px; margin:0 0 30px; }
    .hero-cta { display:flex; gap:16px; flex-wrap:wrap; }
    .sparkle { position:absolute; inset:0; pointer-events:none; background:
      radial-gradient(800px 300px at 10% -10%, rgba(59,130,246,.10), transparent 70%),
      radial-gradient(550px 240px at 90% -20%, rgba(16,185,129,.10), transparent 70%);
      opacity:.8;
    }

    /* Panel & Stats */
    .panel { background:var(--surface); border:1px solid var(--border); border-radius:24px; padding:28px 30px; box-shadow:0 8px 26px -6px var(--shadow); }
    .panel h3 { margin:0 0 16px; font-size:22px; display:flex; align-items:center; gap:10px; }
    .stats { display:grid; grid-template-columns: repeat(auto-fit, minmax(240px,1fr)); gap:20px; margin-top:10px; }
    .stat { background:var(--card); border:1px solid var(--border); border-radius:18px; padding:18px 20px; }
    .stat .label { color:var(--muted); font-size:13px; text-transform:uppercase; letter-spacing:.3px; }
    .stat .value { font-weight:800; font-size:34px; margin-top:8px; }
    .badges { display:flex; gap:10px; margin-top:18px; flex-wrap:wrap; }
    .badge { display:inline-flex; align-items:center; gap:8px; border:1px dashed var(--border); border-radius:999px; padding:8px 12px; font-size:14px; color:var(--muted); }

    /* Trust bar */
    .trust { max-width:1440px; margin:0 auto; padding:0 36px 6px; }
    .trust-row { display:flex; gap:16px; flex-wrap:wrap; justify-content:center; opacity:.9; }
    .pill { border:1px solid var(--border); background:var(--surface); color:var(--muted); padding:10px 14px; border-radius:999px; font-weight:700; font-size:14px; }

    /* Main sections */
    .sections { max-width:1440px; margin:36px auto 90px; padding:0 36px; display:grid; gap:36px; grid-template-columns: 1.35fr .9fr; }
    .features { display:grid; gap:22px; grid-template-columns: repeat(auto-fit, minmax(300px,1fr)); }
    .feature { background:var(--surface); border:1px solid var(--border); border-radius:22px; padding:22px; transition:transform .12s ease; }
    .feature:hover { transform:translateY(-3px); }
    .feature h4 { margin:0 0 10px; font-size:20px; display:flex; align-items:center; gap:10px; }
    .feature p { margin:0; color:var(--muted); font-size:16px; }

    .side { display:grid; gap:22px; }

    /* How it works */
    .how { max-width:1440px; margin:20px auto 70px; padding:0 36px; }
    .how-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(260px,1fr)); gap:18px; }
    .step { background:var(--surface); border:1px solid var(--border); border-radius:20px; padding:18px; }
    .step-num { width:40px; height:40px; border-radius:10px; display:flex; align-items:center; justify-content:center; font-weight:800; color:#fff; background:var(--accent); }
    .step h5 { margin:10px 0 6px; font-size:18px; }
    .step p { margin:0; color:var(--muted); }

    /* Interactive demo */
    .demo { max-width:1440px; margin:0 auto 80px; padding:0 36px; display:grid; grid-template-columns: 1.1fr .9fr; gap:24px; }
    .demo-box { background:var(--surface); border:1px solid var(--border); border-radius:22px; padding:22px; }
    .demo h3 { margin:0 0 12px; font-size:22px; }
    textarea.demo-input { width:100%; min-height:160px; resize:vertical; border-radius:14px; border:1px solid var(--border); background:var(--card); color:var(--text); padding:14px; font-size:16px; outline:none; }
    .demo-actions { display:flex; gap:12px; margin-top:12px; }
    .result-chip { display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:999px; font-weight:800; }
    .chip-fake { background:rgba(220,38,38,.15); color:var(--fake); border:1px solid rgba(220,38,38,.35); }
    .chip-real { background:rgba(22,163,74,.15); color:var(--real); border:1px solid rgba(22,163,74,.35); }
    .confidence { color:var(--muted); margin-left:6px; font-weight:700; }

    /* Carousel */
    .carousel { background:var(--surface); border:1px solid var(--border); border-radius:22px; padding:22px; }
    .slide { display:none; }
    .slide.active { display:block; }
    .slide p { margin:0 0 10px; color:var(--muted); font-size:16px; }
    .slide .author { font-weight:700; font-size:16px; }

    /* FAQ */
    .faq { background:var(--surface); border:1px solid var(--border); border-radius:22px; padding:12px; }
    .faq-item { border-bottom:1px solid var(--border); }
    .faq-item:last-child { border-bottom:none; }
    .faq-q { width:100%; text-align:left; background:transparent; border:none; color:var(--text); font-weight:800; font-size:18px; padding:16px; cursor:pointer; display:flex; align-items:center; justify-content:space-between; }
    .faq-a { max-height:0; overflow:hidden; transition:max-height .24s ease; padding:0 16px; color:var(--muted); font-size:16px; }
    .faq-item.open .faq-a { max-height:240px; padding-bottom:16px; }

    /* CTA */
    .cta { max-width:1440px; margin:0 auto 76px; padding:0 36px; }
    .cta-box { background:linear-gradient(90deg, var(--accent), var(--hover)); color:#fff; border-radius:24px; padding:32px 34px; display:flex; align-items:center; justify-content:center; gap:24px; box-shadow:0 12px 32px -8px var(--shadow); text-align:center; }
    .cta-title { font-weight:900; font-size:26px; margin:0 auto; text-align:center; }
    .cta-actions { display:flex; gap:16px; flex-wrap:wrap; }

    /* Footer */
    footer { text-align:center; padding:48px 0 42px; color:var(--muted); border-top:1px solid var(--border); background:var(--surface); font-size:14px; }

    /* Responsive */
    @media (max-width: 1200px) {
      .hero-inner, .sections, .nav { max-width:1180px; }
    }
    @media (max-width: 1060px) {
      .hero-inner { grid-template-columns: 1fr; margin:64px auto; }
      .sections { grid-template-columns: 1fr; }
      .demo { grid-template-columns: 1fr; }
      .cta-box { flex-direction:column; align-items:center; }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="nav">
      <div class="brand"><span class="pulse"></span> JobGuard AI</div>
      <div class="nav-actions">
        <button class="btn" id="themeToggle" onclick="toggleTheme()">üåì</button>
        {% if session.get('admin_logged_in') %}
          <a href="{{ url_for('home') }}" class="btn">Home</a>
          <a href="{{ url_for('admin_dashboard') }}" class="btn">Dashboard</a>
          <a href="{{ url_for('logout') }}" class="btn">Logout</a>
        {% else %}
          <a href="{{ url_for('predict_form') }}" class="btn">Make Predictions</a>
          <a href="{{ url_for('admin_login') }}" class="btn">Admin Login</a>
        {% endif %}
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div class="sparkle" aria-hidden="true"></div>
    <div class="hero-inner">
      <div>
        <h1>Detect Fake Job Listings with Confidence</h1>
        <p>ML-powered screening to protect candidates and streamline hiring. Transparent logs, retraining history, and clear metrics built-in.</p>
        <div class="hero-cta">
          <a href="{{ url_for('predict_form') }}" class="btn primary">Make Predictions</a>
          <a href="{{ url_for('history') }}" class="btn">View History</a>
        </div>
        <div class="badges">
          <span class="badge">‚ö° Fast Inference</span>
          <span class="badge">üß™ Retraining Logs</span>
          <span class="badge">üîí Admin Controls</span>
          <span class="badge">üìà Accuracy Tracking</span>
        </div>
      </div>

      <div class="panel">
        <h3>üìä Live Stats</h3>
        <div class="stats">
          <div class="stat">
            <div class="label">Total Predictions</div>
            <div class="value" id="countTotal">‚Äî</div>
          </div>
          <div class="stat">
            <div class="label">Fake Jobs</div>
            <div class="value" id="countFake" style="color:var(--fake)">‚Äî</div>
          </div>
          <div class="stat">
            <div class="label">Real Jobs</div>
            <div class="value" id="countReal" style="color:var(--real)">‚Äî</div>
          </div>
          <div class="stat">
            <div class="label">Current Accuracy</div>
            <div class="value" id="accNow">N/A</div>
          </div>
        </div>
        <div class="badges" style="margin-top:12px;">
          <span class="badge">Last Retrained: <strong>{% if last_retrain %}{{ last_retrain[1] }}{% else %}Never{% endif %}</strong></span>
          <span class="badge">Source: <strong>{% if last_retrain %}{{ last_retrain[2] }}{% else %}-{% endif %}</strong></span>
        </div>
      </div>
    </div>
  </section>

  <!-- Trust bar -->
  <section class="trust">
    <div class="trust-row">
      <div class="pill">Verified Metrics</div>
      <div class="pill">Audit-Ready Logs</div>
      <div class="pill">Secure by Design</div>
      <div class="pill">Fast Deployments</div>
      <div class="pill">Lightweight Stack</div>
    </div>
  </section>

  <!-- Features + Sidebar -->
  <section class="sections">
    <div class="features">
      <div class="feature">
        <h4>üß† Accurate Classification</h4>
        <p>TF-IDF + model pipeline trained on curated datasets to flag suspicious postings reliably.</p>
      </div>
      <div class="feature">
        <h4>üîç Transparent Metrics</h4>
        <p>Every retraining event is logged with accuracy and source for auditability.</p>
      </div>
      <div class="feature">
        <h4>üõ†Ô∏è Admin Tools</h4>
        <p>Dashboard to visualize trends, retrain safely with confirmation, and review logs.</p>
      </div>
      <div class="feature">
        <h4>‚öôÔ∏è Lightweight Stack</h4>
        <p>Flask + SQLite + Joblib for fast local deployments and easy maintenance.</p>
      </div>
      <div class="feature">
        <h4>üßØ Safety Checks</h4>
        <p>Input validation prevents junk submissions and improves model robustness.</p>
      </div>
      <div class="feature">
        <h4>üåô Theme Toggle</h4>
        <p>Dark/Light theme with persistence for better accessibility and comfort.</p>
      </div>
    </div>

    <div class="side">
      <div class="carousel" id="carousel">
        <div class="slide active">
          <p>‚ÄúJobGuard AI helped us filter dozens of scam listings instantly.‚Äù</p>
          <div class="author">‚Äî Hiring Ops</div>
        </div>
        <div class="slide">
          <p>‚ÄúLove the retraining logs. Clear, auditable, and fast to review.‚Äù</p>
          <div class="author">‚Äî Compliance Lead</div>
        </div>
        <div class="slide">
          <p>‚ÄúSimple deployment and great visibility into predictions.‚Äù</p>
          <div class="author">‚Äî Platform Admin</div>
        </div>
      </div>

      <div class="faq">
        <div class="faq-item">
          <button class="faq-q" onclick="toggleFaq(this)">How does it detect fake jobs? <span>+</span></button>
          <div class="faq-a">We use text features (TF-IDF) and a trained classifier. You can retrain and track accuracy on your datasets.</div>
        </div>
        <div class="faq-item">
          <button class="faq-q" onclick="toggleFaq(this)">Can I see retraining history? <span>+</span></button>
          <div class="faq-a">Yes, the Training Logs page lists each retrain with accuracy, timestamp, and data source.</div>
        </div>
        <div class="faq-item">
          <button class="faq-q" onclick="toggleFaq(this)">Is the dashboard secured? <span>+</span></button>
          <div class="faq-a">Only admins can access the dashboard, retrain endpoint, and training logs.</div>
        </div>
      </div>
    </div>
  </section>

  <!-- How it works -->
  <section class="how">
    <div class="how-grid">
      <div class="step">
        <div class="step-num">1</div>
        <h5>Paste Job Text</h5>
        <p>Provide the job description you want to verify.</p>
      </div>
      <div class="step">
        <div class="step-num">2</div>
        <h5>Model Analyzes</h5>
        <p>We transform text to TF-IDF and run a trained classifier.</p>
      </div>
      <div class="step">
        <div class="step-num">3</div>
        <h5>Get Verdict</h5>
        <p>Instant ‚ÄúFake/Real‚Äù label with confidence score.</p>
      </div>
      <div class="step">
        <div class="step-num">4</div>
        <h5>Retrain Anytime</h5>
        <p>Admins can retrain and track improvements in logs.</p>
      </div>
    </div>
  </section>

  <!-- Interactive demo -->
  <section class="demo">
    <div class="demo-box">
      <h3>Quick Try (client-side demo)</h3>
      <textarea class="demo-input" id="demoText" placeholder="Paste a job description here to get a rough local estimate..."></textarea>
      <div class="demo-actions">
        <button class="btn primary" onclick="localEstimate()">Estimate Locally</button>
        <a href="{{ url_for('predict_form') }}" class="btn">Open Full Predictor</a>
      </div>
      <div id="demoResult" style="margin-top:12px;"></div>
    </div>
    <div class="demo-box">
      <h3>Why Client Demo?</h3>
      <p style="color:var(--muted); line-height:1.6;">
        This on-page estimate highlights how the system thinks using simple keyword heuristics
        (no server call). For real results, use the full predictor which leverages the trained model,
        stores history, and updates analytics.
      </p>
      <ul style="margin:14px 0 0 18px; color:var(--muted); line-height:1.7;">
        <li>No data leaves your browser in this demo.</li>
        <li>Great for a quick gut-check before running the real model.</li>
        <li>Use Admin Dashboard to review logs and retrain models.</li>
      </ul>
    </div>
  </section>

  <!-- CTA -->
  <section class="cta">
    <div class="cta-box">
      <div class="cta-title">Start screening job posts in seconds</div>
      <div class="cta-actions">
        <a href="{{ url_for('predict_form') }}" class="btn primary">Make Predictions</a>
        <a href="{{ url_for('history') }}" class="btn">View History</a>
        {% if not session.get('admin_logged_in') %}
          <a href="{{ url_for('admin_login') }}" class="btn">Admin Login</a>
        {% endif %}
      </div>
    </div>
  </section>

  <footer>¬© 2025 JobGuard AI ‚Ä¢ Secure Hiring Intelligence</footer>

  <script>
    // Theme toggle persistence
    function toggleTheme() {
      const html = document.documentElement;
      const current = html.getAttribute('data-theme') || 'dark';
      const next = current === 'dark' ? 'light' : 'dark';
      html.setAttribute('data-theme', next);
      try { localStorage.setItem('jg-theme', next); } catch {}
    }
    (function initTheme() {
      try {
        const saved = localStorage.getItem('jg-theme');
        if (saved) document.documentElement.setAttribute('data-theme', saved);
      } catch {}
    })();

    // Animated counters
    function animateCount(el, to, duration = 800) {
      const start = 0;
      const diff = to - start;
      const startTs = performance.now();
      function step(now) {
        const p = Math.min((now - startTs) / duration, 1);
        el.textContent = Math.round(start + diff * p);
        if (p < 1) requestAnimationFrame(step);
      }
      requestAnimationFrame(step);
    }
    window.addEventListener('DOMContentLoaded', () => {
      const total = {{ total if total is defined else 0 }};
      const fake = {{ fake if fake is defined else 0 }};
      const real = {{ real if real is defined else 0 }};
      const acc = {% if last_retrain %}{{ "%.2f"|format(last_retrain[0]) }}{% else %}null{% endif %};

      const elTotal = document.getElementById('countTotal');
      const elFake = document.getElementById('countFake');
      const elReal = document.getElementById('countReal');
      const elAcc = document.getElementById('accNow');

      if (elTotal) animateCount(elTotal, total);
      if (elFake) animateCount(elFake, fake);
      if (elReal) animateCount(elReal, real);
      if (elAcc) elAcc.textContent = acc ? acc + '%' : 'N/A';
    });

    // Testimonials carousel (auto-rotate)
    (function carousel() {
      const slides = Array.from(document.querySelectorAll('#carousel .slide'));
      let i = 0;
      setInterval(() => {
        if (!slides.length) return;
        slides[i].classList.remove('active');
        i = (i + 1) % slides.length;
        slides[i].classList.add('active');
      }, 3500);
    })();

    // FAQ accordion
    function toggleFaq(btn) {
      const item = btn.parentElement;
      item.classList.toggle('open');
      btn.querySelector('span').textContent = item.classList.contains('open') ? '‚àí' : '+';
    }

    // Local heuristic estimate for demo only
    function localEstimate() {
      const el = document.getElementById('demoText');
      const out = document.getElementById('demoResult');
      const text = (el.value || '').toLowerCase();

      if (!text.trim()) {
        out.innerHTML = '';
        return;
      }

      const fakeHints = ['whatsapp', 'telegram', 'bitcoin', 'crypto', 'wire money', 'pay fee', 'registration fee', 'click link', 'urgent hire', 'work from whatsapp', 'gift card', 'upfront'];
      const realHints = ['benefits', 'health insurance', '401k', 'on-site', 'hybrid', 'salary', 'interview', 'requirements', 'experience', 'python', 'java', 'engineering', 'hr'];

      let score = 0;
      fakeHints.forEach(k => { if (text.includes(k)) score += 2; });
      realHints.forEach(k => { if (text.includes(k)) score -= 1; });
      if (text.length < 120) score += 1; // short, suspicious
      if (text.includes('@') || text.includes('http')) score += 1;

      const isFake = score >= 2;
      const conf = Math.min(99, 60 + Math.abs(score) * 8);

      out.innerHTML = isFake
        ? '<span class="result-chip chip-fake">Fake Job</span><span class="confidence">~' + conf + '%</span>'
        : '<span class="result-chip chip-real">Real Job</span><span class="confidence">~' + (100 - (conf-60)) + '%</span>';
    }
  </script>
</body>
</html>